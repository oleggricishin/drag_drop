<div class="flex pb-4 w-full relative">
  <div class="w-3">
    <h3>Suppliers</h3>
    <button mat-stroked-button (click)="addSuppliers()">Supplier</button>
    <!--<input type="file" (change)="onSuppliersSelect($event)" accept=".csv" />
    <p>
      @if (suppliers().length > 0) {
        Loaded successfully
      } @else {
        No data or data is incorrect
      }
    </p>-->
  </div>
  <div class="w-3">
    <h3>Demand</h3>
    <div class="flex gap-2">
      <button mat-stroked-button (click)="addDemand()">Demand</button>
      <button mat-stroked-button (click)="importData()">Import Data</button>
      <button mat-stroked-button (click)="exportData()">Export Data</button>
    </div>

    <!--<p>Load Demand</p>
    <input type="file" (change)="onDemandSelect($event)" accept=".csv" />
    <p>
      @if (demand().length > 0) {
        Loaded successfully
      } @else {
        No data or data is incorrect
      }
    </p>-->
  </div>
  <div class="absolute error-container">
    <mat-tab-group>
      <mat-tab >
        <ng-template mat-tab-label>
          Demand
          <span
            matBadge="{{eventsShiftErrors().length ? eventsShiftErrors().length : null}}"
            matBadgeColor="warn"
            matBadgeOverlap="false"
            class="badge-icon"
          ></span>
        </ng-template>
        <div [style.height.px]="115" class="w-100 border-1 border-1 border-round-xl p-1 overflow-y-auto">
          @for (err of eventsShiftErrors(); track err) {
            <div class="error-message" [innerHTML]="err"></div>
          }
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          Suppliers
          <span
            matBadge="{{supplierOverflowErrors().length ? supplierOverflowErrors().length : null}}"
            matBadgeColor="warn"
            matBadgeOverlap="false"
            class="badge-icon"
          ></span>
        </ng-template>
        <div [style.height.px]="115" class="w-100 border-1 border-1 border-round-xl p-1 overflow-y-auto">
          @for (err of supplierOverflowErrors(); track err) {
            <div class="error-message" [innerHTML]="err"></div>
          }
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          Penalties
          <span
            matBadge="{{penaltiesBadge() > 0 ? penaltiesBadge() : null}}"
            matBadgeColor="warn"
            matBadgeOverlap="false"
            class="badge-icon"
          ></span>
        </ng-template>
        <div [style.height.px]="115" class="w-100 border-1 border-1 border-round-xl p-1 overflow-y-auto">
          <div style="font-weight: 500;">
            <div>Shift penalties: {{shiftPenalties()}}</div>
            <div>Unassigned penalties: {{unassignedPenalties().amount}} (#{{unassignedPenalties().demand}} demands)</div>
            <div>Over Production penalties: {{productionPenalties().over}}</div>
            <div>Under Production penalties: {{productionPenalties().under}}</div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

